{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "YKS Study Plan Schema",
  "description": "JSON schema for AI-generated YKS study plans",
  "type": "object",
  "required": [
    "kullanıcı_ID",
    "tarih", 
    "haftalık_plan",
    "kaynak_önerileri"
  ],
  "properties": {
    "kullanıcı_ID": {
      "type": "string",
      "description": "Unique user identifier",
      "minLength": 1
    },
    "tarih": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "description": "Plan creation date in YYYY-MM-DD format"
    },
    "haftalık_plan": {
      "type": "array",
      "description": "7-day study plan array",
      "minItems": 7,
      "maxItems": 7,
      "items": {
        "type": "object",
        "required": ["gün", "TYT", "AYT"],
        "properties": {
          "gün": {
            "type": "string",
            "enum": ["Pazartesi", "Salı", "Çarşamba", "Perşembe", "Cuma", "Cumartesi", "Pazar"],
            "description": "Day of the week in Turkish"
          },
          "TYT": {
            "type": "array",
            "description": "TYT study blocks for this day",
            "items": {
              "$ref": "#/definitions/studyBlock"
            }
          },
          "AYT": {
            "type": "array", 
            "description": "AYT study blocks for this day",
            "items": {
              "$ref": "#/definitions/studyBlock"
            }
          }
        }
      }
    },
    "kaynak_önerileri": {
      "type": "array",
      "description": "Recommended study resources",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/resourceRecommendation"
      }
    },
    "ux_önerileri": {
      "type": "array",
      "description": "UX tips and recommendations",
      "items": {
        "type": "string",
        "minLength": 10,
        "maxLength": 200
      }
    },
    "adaptasyon_notları": {
      "type": "string",
      "description": "AI adaptation notes for this plan",
      "maxLength": 500
    },
    "confidence_overall": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Overall confidence score from AI (0-1)"
    },
    "scheduler_strategy": {
      "type": "string",
      "enum": ["balanced", "spaced-repetition", "intensive"],
      "description": "Scheduling strategy used by AI"
    }
  },
  "definitions": {
    "studyBlock": {
      "type": "object",
      "required": [
        "konu",
        "soru_sayısı", 
        "süre_dakika",
        "odak_konular",
        "confidence"
      ],
      "properties": {
        "konu": {
          "type": "string",
          "description": "Subject name",
          "minLength": 2,
          "maxLength": 50
        },
        "soru_sayısı": {
          "type": "number",
          "minimum": 1,
          "maximum": 100,
          "description": "Number of questions to solve"
        },
        "süre_dakika": {
          "type": "number",
          "minimum": 5,
          "maximum": 300,
          "description": "Estimated time in minutes"
        },
        "odak_konular": {
          "type": "array",
          "description": "Focus topics for this block",
          "minItems": 1,
          "maxItems": 5,
          "items": {
            "type": "string",
            "minLength": 3,
            "maxLength": 50
          }
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "AI confidence score for this block (0-1)"
        },
        "not": {
          "type": "string",
          "description": "Optional note for this study block",
          "maxLength": 200
        },
        "blok_id": {
          "type": "string",
          "description": "Unique block identifier for progress tracking",
          "pattern": "^[a-zA-Z0-9_-]+$"
        },
        "zorluk": {
          "type": "string",
          "enum": ["kolay", "orta", "zor"],
          "description": "Difficulty level"
        },
        "repeat_after_days": {
          "type": "number",
          "minimum": 1,
          "maximum": 30,
          "description": "Recommended repeat interval in days"
        }
      }
    },
    "resourceRecommendation": {
      "type": "object",
      "required": [
        "konu",
        "tip",
        "isim", 
        "zorluk",
        "beklenen_süre_dakika",
        "öncelik"
      ],
      "properties": {
        "konu": {
          "type": "string",
          "description": "Related subject",
          "minLength": 2,
          "maxLength": 50
        },
        "tip": {
          "type": "string",
          "enum": ["kitap", "video", "soru_bankası", "online_kaynak"],
          "description": "Resource type"
        },
        "isim": {
          "type": "string",
          "description": "Resource name",
          "minLength": 5,
          "maxLength": 100
        },
        "zorluk": {
          "type": "string",
          "enum": ["kolay", "orta", "zor"],
          "description": "Difficulty level"
        },
        "beklenen_süre_dakika": {
          "type": "number",
          "minimum": 10,
          "maximum": 600,
          "description": "Expected completion time in minutes"
        },
        "öncelik": {
          "type": "number",
          "minimum": 1,
          "maximum": 5,
          "description": "Priority level (1-5, 5 being highest)"
        },
        "link": {
          "type": "string",
          "format": "uri",
          "description": "Optional web link to resource"
        },
        "repeat_after_days": {
          "type": "number",
          "minimum": 1,
          "maximum": 30,
          "description": "Recommended repeat interval in days for spaced repetition"
        },
        "cost": {
          "type": "string",
          "enum": ["ücretsiz", "ücretli", "freemium"],
          "description": "Cost information"
        }
      }
    }
  },
  "examples": [
    {
      "kullanıcı_ID": "user_1234567890",
      "tarih": "2024-01-15",
      "haftalık_plan": [
        {
          "gün": "Pazartesi",
          "TYT": [
            {
              "konu": "Matematik",
              "soru_sayısı": 25,
              "süre_dakika": 90,
              "odak_konular": ["Fonksiyonlar", "Denklem sistemleri"],
              "confidence": 0.85,
              "not": "Temel kavramları pekiştir",
              "blok_id": "pazartesi_tyt_math_1"
            }
          ],
          "AYT": []
        }
      ],
      "kaynak_önerileri": [
        {
          "konu": "Matematik",
          "tip": "soru_bankası",
          "isim": "TYT Matematik Soru Bankası",
          "zorluk": "orta",
          "beklenen_süre_dakika": 120,
          "öncelik": 5,
          "repeat_after_days": 3
        }
      ],
      "confidence_overall": 0.78
    }
  ]
}
